# Fractal Explorer

マンデルブロ集合をはじめとするフラクタル図形をブラウザ上でインタラクティブに探索できる Web アプリです。

**https://hide10.github.io/mandelbrot-webapp/**

---

## 使い方

### 基本操作

| 操作 (PC) | 操作 (スマートフォン) | 動作 |
|-----------|---------------------|------|
| ドラッグ | 1本指スワイプ | 移動（パン） |
| マウスホイール | ピンチイン/アウト | ズームイン/アウト |
| ダブルクリック | ダブルタップ | その地点にズームイン |
| Shift + ダブルクリック | — | ズームアウト |

### メニュー (☰ ボタン)

左上のハンバーガーメニューを開くと以下を設定できます。

- **フラクタル種類** — マンデルブロ集合、ジュリア集合、バーニングシップ、トリコーンから選択
- **カラーパレット** — 6種類のカラーテーマをワンクリックで切り替え
- **最大反復回数** — スライダーで 50〜5000 の範囲で調整（深くズームするほど高い値が必要）
- **ジュリア集合パラメータ** — ジュリア集合選択時に c の値（実部・虚部）を入力可能
- **リセット** — 初期表示に戻す
- **URL共有** — 現在の表示状態をURLとしてクリップボードにコピー

### その他のボタン

- **JP / EN** — 日本語・英語の切り替え
- **📷** — 現在の描画をPNG画像として保存

### URL共有

「URL共有」ボタンを押すと、座標・ズーム倍率・フラクタル種類・パレットなどの状態がすべてURLに埋め込まれます。そのURLを開くだけで同じ表示を再現できます。

---

## 対応フラクタル

| フラクタル | 数式 |
|-----------|------|
| マンデルブロ集合 | z_(n+1) = z_n² + c |
| ジュリア集合 | z_(n+1) = z_n² + c (c固定) |
| バーニングシップ | z_(n+1) = (\|Re(z_n)\| + i\|Im(z_n)\|)² + c |
| トリコーン | z_(n+1) = conj(z_n)² + c |

---

## 技術スタック

| 項目 | 技術 |
|------|------|
| 描画 | **WebGL** — GPUフラグメントシェーダーによるピクセル並列計算 |
| フロントエンド | **HTML5 + CSS3 + JavaScript (ES2020+)** — フレームワーク不使用 |
| カラーリング | スムースカラーリング（正規化反復回数） + 256色パレットテクスチャ |
| ビルド | **不要** — ビルドレス。ファイルをそのまま配信 |
| ホスティング | **GitHub Pages** |

### ファイル構成

```
mandelbrot-webapp/
├── index.html        … メインHTML
├── css/
│   └── style.css     … ダークテーマ、レスポンシブ
├── js/
│   ├── app.js        … エントリーポイント、状態管理
│   ├── renderer.js   … WebGL描画エンジン
│   ├── shaders.js    … GLSLシェーダー（頂点/フラグメント）
│   ├── controls.js   … マウス・タッチ入力ハンドリング
│   ├── ui.js         … サイドパネル・各種UI制御
│   ├── palettes.js   … カラーパレット6種定義
│   ├── i18n.js       … 国際化（日本語/英語）
│   └── utils.js      … URL状態管理、画像保存、トースト
├── SPEC.md           … 仕様書
└── PROGRESS.md       … 開発進捗メモ
```

---

## Claude Code でこのアプリを作った方法

このアプリは [Claude Code](https://claude.ai/claude-code)（Anthropic の CLI エージェント）との対話だけで、仕様策定からデプロイまで完了しています。以下、実際のやり取りの流れです。

### 1. 最初のプロンプト（要件を伝える）

```
マンデルブロ集合を描画するWEBアプリを作成する。まず仕様を作成したい。
github.ioで公開可能なこと。描画のパターンセットを数種類から選べること。
スマホ、PC両対応としスクロールとズームアップ、ズームダウンが可能なことを
最低要件とする。他に決めるべきこと、決めたほうが良いことがあれば
君から僕に質問してほしい。
```

**ポイント**: 最低限の要件だけ伝えて、**決めるべきことはClaude側から質問させる**。全部を自分で考える必要はない。Claude が以下を質問してきた：
- 「パターンセット」がカラーなのかフラクタル種類なのか
- 技術スタック（バニラJS / WebGL / React等）
- 追加機能（座標表示、URL共有、画像保存、反復回数調整）
- UI言語

### 2. 選択肢に答える

Claude が出してきた選択肢から選ぶだけ。この時点で仕様書（SPEC.md）が自動生成された。

### 3. 実装を指示

```
実装しながら進行状況をメモして、後日再開可能なようにして
```

**ポイント**: 「進行状況をメモして」と伝えると PROGRESS.md を作成し、タスクを分割して進捗管理しながら実装してくれる。セッションが切れても再開しやすい。

### 4. デプロイ

```
デプロイ
```

一言でOK。git commit → push → GitHub Pages 有効化まで自動で行われた。

### コツまとめ

| コツ | 説明 |
|------|------|
| **要件は最低限でOK** | 足りない情報はClaude が質問してくるので、全部を事前に決めなくてよい |
| **「質問してほしい」と伝える** | Claudeに主導権を渡すと、考慮漏れを防げる |
| **仕様→実装の順** | 「まず仕様を作成したい」と最初に言うことで、いきなりコードを書き始めず設計が先にできる |
| **進捗メモを頼む** | 長いタスクは「進行状況をメモして」で中断耐性がつく |
| **短い指示で動く** | 仕様が決まった後は「デプロイ」の一言で commit/push/Pages設定まで完了する |

---

## ライセンス

MIT
