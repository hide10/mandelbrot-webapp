# 進捗メモ - Mandelbrot Web App

## 再開時の手引き

このファイルはセッション中断時に再開しやすくするための進捗記録です。
仕様は `SPEC.md` を参照してください。

## タスク一覧と進捗

| # | タスク | 状態 | 対象ファイル | メモ |
|---|--------|------|-------------|------|
| 1 | 基盤ファイル作成（HTML, CSS） | **完了** | index.html, css/style.css | レスポンシブ対応済み |
| 2 | i18n モジュール | **完了** | js/i18n.js | 日英切り替え、ブラウザ自動判定対応 |
| 3 | カラーパレット定義 | **完了** | js/palettes.js | 6パレット、256色テクスチャ生成、CSSグラデーション |
| 4 | WebGLシェーダー | **完了** | js/shaders.js | 4フラクタル対応、スムースカラーリング |
| 5 | WebGL描画エンジン | **完了** | js/renderer.js | preserveDrawingBuffer有効（画像保存用） |
| 6 | マウス・タッチ操作 | **完了** | js/controls.js | ドラッグ、ホイール、ピンチ、ダブルタップ |
| 7 | UIコントロールパネル | **完了** | js/ui.js | サイドパネル、全コントロール実装済み |
| 8 | ユーティリティ・URL管理 | **完了** | js/utils.js | URLハッシュ保存/復元、クリップボード、PNG保存 |
| 9 | アプリ初期化・統合 | **完了** | js/app.js | モジュール統合、requestAnimationFrame描画 |
| 10 | 動作確認・最終調整 | **完了** | - | JS構文チェックOK、全リソース配信確認済み |

## 技術的な判断・メモ

- WebGLシェーダー内で全フラクタル種類を1つのシェーダーで処理（uniform intで分岐）
- カラーパレットは256x1 RGBAテクスチャとしてGPUに送信
- 初期ズーム値: 0.35（マンデルブロ集合全体が収まる倍率）
- 反復回数スライダーは対数スケール（10^1.7 〜 10^3.7 → 50〜5000）
- double emulationは未実装（将来の拡張候補）
- preserveDrawingBuffer: true でCanvas画像保存を有効化

## ファイル構成

```
mandelbrot-webapp/
├── index.html              # メインHTML
├── css/
│   └── style.css           # スタイルシート（ダークテーマ、レスポンシブ）
├── js/
│   ├── i18n.js             # 国際化（日英）
│   ├── palettes.js         # カラーパレット6種定義
│   ├── shaders.js          # GLSL頂点・フラグメントシェーダー
│   ├── renderer.js         # WebGL描画エンジン
│   ├── utils.js            # URL状態管理、画像保存、トースト
│   ├── controls.js         # マウス・タッチ操作
│   ├── ui.js               # UIパネル、コントロール類
│   └── app.js              # アプリ初期化・統合（エントリーポイント）
├── SPEC.md                 # 仕様書
└── PROGRESS.md             # 本ファイル（進捗記録）
```

## 実装完了状態での確認事項

- [x] JS構文エラーなし（node -e でパースチェック済み）
- [x] 全リソース HTTP 200で配信確認済み
- [ ] ブラウザ実機確認（PC Chrome）
- [ ] ブラウザ実機確認（スマートフォン）
- [ ] GitHub Pagesデプロイ

## 次に再開する場合

1. `python3 -m http.server 8080` でローカルサーバー起動
2. `http://localhost:8080` をブラウザで開いて動作確認
3. 問題があれば該当ファイルを修正
4. 問題なければ git commit & GitHub Pagesへデプロイ

## 将来の拡張候補

- double emulation（float64精度）による深いズーム対応
- CSS transformによるズーム時のプレビューアニメーション
- Web Workersを使った進捗表示（描画中インジケーター）
- マンデルブロ集合上のクリック→対応するジュリア集合への遷移機能
